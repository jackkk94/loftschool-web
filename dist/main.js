"use strict";ymaps.ready(function(){for(var n=new ymaps.Map("map",{center:[55.75,37.597],zoom:13.2,controls:["zoomControl"],behaviors:["drag"]}),e=[{x:55.74,y:37.579},{x:55.7499,y:37.603},{x:55.757,y:37.62},{x:55.758,y:37.5827}],t=[],o=0;o<e.length;o++){var a=new ymaps.Placemark([e[o].x,e[o].y],{},{iconLayout:"default#image",iconImageHref:"img/card/marker.png",iconImageSize:[49,59],iconImageOffset:[-24.5,-59]});t.push(a)}t.forEach(function(e,t){n.geoObjects.add(e)})}),function(){var n,o,e,a=document.querySelector(".fas");function i(){$(".video__play-img").toggleClass("video__player-img--active"),o.max=n.duration,n.paused?(n.play(),e=setInterval(t,1e3/60),$(".video__play").addClass("video__play--active")):(n.pause(),clearInterval(e),$(".video__play").removeClass("video__play--active"))}function c(){n.pause(),clearInterval(e)}function r(){n.paused?(n.play(),$(".video__player-img").addClass("video__player-img--active"),$(".duration__img").addClass("active")):(n.pause(),$(".video__player-img").removeClass("video__player-img--active"),$(".duration__img").removeClass("active")),n.currentTime=o.value,e=setInterval(t,1e3/60)}function t(){o.value=n.currentTime}function s(){0===n.volume?(n.volume=soundLevel,soundControl.value=10*soundLevel,$(".sound").removeClass("active")):(soundLevel=n.volume,n.volume=0,soundControl.value=0,$(".sound").addClass("active"))}function l(){n.volume=soundControl.value/10,0==n.volume?$(".sound").addClass("active"):$(".sound").removeClass("active")}$(document).ready(function(){(n=document.querySelector("#player")).addEventListener("click",i);for(var e=document.querySelectorAll(".play"),t=0;t<e.length;t++)e[t].addEventListener("click",i);document.querySelector("#mic").addEventListener("click",s),(o=document.getElementById("durationLevel")).addEventListener("click",r),o.addEventListener("onmousemove",r),o.addEventListener("mousedown",c),o.min=0,o.value=0,soundControl=document.querySelector("#micLevel"),soundControl.addEventListener("click",l),soundControl.addEventListener("onmousemove",l),soundControl.min=0,soundControl.max=10,soundControl.value=soundControl.max,n.addEventListener("ended",function(){$(".video__player-img").toggleClass(".video__player-img .video__player-img--active"),n.currentTime=0}),a.addEventListener("click",function(e){e.preventDefault(),a.classList.contains("fa-volume-off")?(a.classList.add("fa-volume-mute"),a.classList.remove("fa-volume-off")):(a.classList.add("fa-volume-off"),a.classList.remove("fa-volume-mute"))})})}(),function(){var t=document.querySelector("#chocolateMenu"),n=document.querySelector("#chocolateMenuButton"),e=document.querySelector("#sendForm"),o=document.querySelector("#clearForm"),a=document.querySelector(".form__modal-container"),i=document.querySelector(".modal__text"),c=document.querySelector("#closeForm"),r=document.querySelectorAll(".comments__avatar"),s=document.querySelectorAll(".comment"),l=0,u=(setInterval(function(){S(l+1)},4e3),document.querySelector(".fas"),document.querySelector(".btn__arrow--prev")),d=document.querySelector(".btn__arrow--next"),v=document.querySelector("#slider"),m=document.querySelectorAll(".slider__item"),f=document.querySelector(".slider__item"),p=0;v.style.right=p;document.querySelector(".item__content-author");for(var y=document.querySelectorAll(".item__content-author"),_=document.querySelectorAll(".menu1__button"),g=function(n){y[n].addEventListener("click",function(e){e.preventDefault(),y[n].parentNode.classList.toggle("item__content--active");for(var t=0;t<y.length;t++)t!=n&&y[t].parentNode.classList.remove("item__content--active")})},L=0;L<y.length;L++)g(L);var h=function(n){_[n].addEventListener("click",function(e){e.preventDefault(),_[n].parentNode.classList.toggle("menu1__item--active");for(var t=0;t<_.length;t++)t!=n&&_[t].parentNode.classList.remove("menu1__item--active")})};for(L=0;L<_.length;L++)h(L);function q(e,t){e.classList.toggle("menu--active"),t.classList.toggle("is-active"),e.classList.remove("fadeOut")}n.addEventListener("click",function(){this.classList.contains("is-active")?(t.classList.add("fadeOut"),setTimeout(function(){q(t,n)},400)):q(t,n)}),t.addEventListener("click",function(e){e.preventDefault(),e.target.classList.contains("menu__link")&&t.classList.contains("menu--active")&&(t.classList.add("fadeOut"),setTimeout(function(){t.classList.remove("menu--active"),n.classList.remove("is-active")},400))}),o.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<document.forms[0].elements.length;t++)document.forms[0].elements[t].value=""}),e.addEventListener("click",function(e){e.preventDefault();var t=function(e){var t=new FormData,n=e;return t.append("name",n.name.value),t.append("phone",n.phone.value),t.append("comment",n.comment.value),t.append("to","jackpanchenko@mail.ru"),t}(document.forms[0].elements),n=new XMLHttpRequest;n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.onload=function(){i.textContent=n.response.message,c.addEventListener("click",function(e){e.preventDefault(),a.classList.remove("form__modal-container--active"),document.querySelector("body").style.overflow="visible"}),a.classList.add("form__modal-container--active"),document.querySelector("body").style.overflow="hidden"},n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(t)});var C=function(e){var t=r[e];t.setAttribute("data-index",[e]),t.addEventListener("click",function(e){e.preventDefault(),this.classList.add("user--active"),S(t.getAttribute("data-index"))})};for(L=0;L<r.length;L++)C(L);function S(e){s[l].classList.remove("comment--active"),s[l].style.display="none",r[l].classList.remove("user--active"),l=(e+s.length)%s.length,s[l].style.display="flex",r[l].classList.add("user--active"),setTimeout(function(){s[l].classList.add("comment--active")},100)}u.addEventListener("click",function(e){e.preventDefault(),function(){var e=(m.length-1)*f.offsetWidth,t=f.offsetWidth;0<p?(p-=t,v.style.right=p+"px"):(p=e,v.style.right=e+"px")}()}),d.addEventListener("click",function(e){e.preventDefault(),function(){var e=(m.length-1)*f.offsetWidth,t=f.offsetWidth;p<e?(p+=t,v.style.right=p+"px"):(p=0,v.style.right="0px")}()});function x(e){if(!b){var t=parseInt(e);!1==!!t&&console.error("не верное значение для аргуемента sectionEq"),b=!0;var n=-100*t+"%";E.eq(e).addClass("active").siblings().removeClass("active"),w.css({transform:"translateY(".concat(n,")")}),setTimeout(function(){b=!1,function(e){$(".fixed-menu__item").eq(e).addClass("active").siblings().removeClass("active")}(e)},1300)}}function k(e){var t=E.filter(".active"),n=t.next(),o=t.prev();"next"===e&&n.length&&x(n.index()),"prev"===e&&o.length&&x(o.index())}var E=$(".section"),w=$(".maincontent"),b=!1,D=new MobileDetect(window.navigator.userAgent).mobile();$(".wrapper").on("wheel",function(e){var t=e.originalEvent.deltaY;console.log(t),0<t&&k("next"),t<0&&k("prev")}),$(".wrapper").on("touchmove",function(e){e.preventDefault()}),$(document).on("keydown",function(e){switch(e.keyCode){case 38:k("prev");break;case 40:k("next")}}),$("[data-scroll-to]").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-scroll-to");x(t)}),D&&$(window).swipe({swipe:function(e,t){k("up"===t?"next":"prev")}})}();